<Page x:Class="RegistryRepairTool.Views.Pages.SettingsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:material="http://materialdesigninxaml.net/winfx/xaml/themes"
      Title="Настройки"
      Background="#FFF8F9FA"
      FontFamily="Segoe UI">

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <!-- Подключаем ваши стили навигации -->
                <ResourceDictionary Source="/Styles/NavigationStyles.xaml"/>

                <!-- Локальные стили для этой страницы -->
                <ResourceDictionary>
                    <!-- Цвета (можно вынести в общие ресурсы) -->
                    <SolidColorBrush x:Key="PrimaryBrush" Color="#FF3F51B5"/>
                    <SolidColorBrush x:Key="PrimaryLightBrush" Color="#FFC5CAE9"/>
                    <SolidColorBrush x:Key="PrimaryDarkBrush" Color="#FF303F9F"/>
                    <SolidColorBrush x:Key="BorderBrush" Color="#FFEEEEEE"/>

                    <!-- Стиль для заголовков -->
                    <Style x:Key="PageTitleStyle" TargetType="TextBlock">
                        <Setter Property="FontSize" Value="20"/>
                        <Setter Property="FontWeight" Value="Medium"/>
                        <Setter Property="Foreground" Value="{StaticResource PrimaryDarkBrush}"/>
                        <Setter Property="Margin" Value="0,0,0,24"/>
                    </Style>

                    <!-- Стиль для заголовков разделов -->
                    <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
                        <Setter Property="FontSize" Value="16"/>
                        <Setter Property="FontWeight" Value="SemiBold"/>
                        <Setter Property="Foreground" Value="{StaticResource PrimaryDarkBrush}"/>
                        <Setter Property="Margin" Value="0,0,0,12"/>
                    </Style>

                    <!-- Стиль для чекбоксов -->
                    <Style x:Key="SettingsCheckBox" TargetType="CheckBox">
                        <Setter Property="Margin" Value="0,8"/>
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="Foreground" Value="#FF212121"/>
                    </Style>

                    <!-- Стиль для текстового поля -->
                    <Style x:Key="SettingsTextBox" TargetType="TextBox">
                        <Setter Property="Width" Value="250"/>
                        <Setter Property="Padding" Value="8"/>
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="BorderBrush" Value="{StaticResource PrimaryDarkBrush}"/>
                        <Setter Property="BorderThickness" Value="0,0,0,1"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Margin" Value="0,0,8,0"/>
                    </Style>

                    <!-- Стиль для кнопки "Обзор" -->
                    <Style x:Key="BrowseButtonStyle" TargetType="Button" BasedOn="{StaticResource ModernButton}">
                        <Setter Property="Background" Value="{StaticResource PrimaryBrush}"/>
                        <Setter Property="Padding" Value="12,6"/>
                        <Setter Property="Margin" Value="0"/>
                    </Style>
                </ResourceDictionary>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>

    <ScrollViewer>
        <StackPanel Margin="24" Width="400">
            <!-- Заголовок страницы -->
            <TextBlock Text="НАСТРОЙКИ" 
                      Style="{StaticResource PageTitleStyle}"/>

            <!-- Раздел сканирования -->
            <TextBlock Text="Параметры сканирования" 
                      Style="{StaticResource SectionHeaderStyle}"/>

            <CheckBox Content="Сканировать системный реестр" 
                     IsChecked="{Binding ScanSystemRegistry}"
                     Style="{StaticResource SettingsCheckBox}"/>

            <CheckBox Content="Сканировать реестр текущего пользователя" 
                     IsChecked="{Binding ScanUserRegistry}"
                     Style="{StaticResource SettingsCheckBox}"/>

            <!-- Разделитель -->
            <Border Height="1" Background="{StaticResource BorderBrush}" Margin="0,16"/>

            <!-- Раздел исправления -->
            <TextBlock Text="Параметры исправления" 
                      Style="{StaticResource SectionHeaderStyle}"/>

            <CheckBox Content="Создавать резервную копию перед исправлением" 
                     IsChecked="{Binding CreateBackupBeforeFix}"
                     Style="{StaticResource SettingsCheckBox}"/>

            <!-- Поле для пути бэкапа -->
            <StackPanel Orientation="Horizontal" Margin="0,12" VerticalAlignment="Center">
                <TextBox Text="{Binding BackupLocation}" 
                         Style="{StaticResource SettingsTextBox}"/>

                <Button Command="{Binding BrowseFolderCommand}"
                        Style="{StaticResource BrowseButtonStyle}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="" 
                                  FontFamily="Segoe MDL2 Assets"
                                  Margin="0,0,4,0"/>
                        <TextBlock Text="Обзор"/>
                    </StackPanel>
                </Button>
            </StackPanel>

            <CheckBox Content="Показывать подробные логи" 
                     IsChecked="{Binding ShowDetailedLogs}"
                     Style="{StaticResource SettingsCheckBox}"
                     Margin="0,16,0,8"/>

            <!-- Кнопки действий -->
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,24,0,0" Cursor="">
                <Button Command="{Binding CancelCommand}"
                        Style="{StaticResource ModernButton}"
                        Background="Transparent"
                        Foreground="{StaticResource PrimaryDarkBrush}"
                        >
                    <TextBlock Text="Отмена"/>
                </Button>

                <Button Command="{Binding SaveCommand}"
                        Style="{StaticResource ModernButton}"
                        Background="{StaticResource PrimaryBrush}"
                        Foreground="White">
                    <TextBlock Text="Сохранить"/>
                </Button>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page>